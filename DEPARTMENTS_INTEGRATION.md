# دليل تكامل ملف الإدارات JSON

## نظرة عامة
تم تحديث استمارة إضافة المنجز لتدعم نظام الإدارات المتدرج من ملف JSON فعلي يحتوي على:
- **الإدارة التنفيذية**: الإدارة الرئيسية
- **الإدارة الفرعية**: الأقسام التابعة للإدارة التنفيذية

## الملف المستخدم
تم إنشاء ملف `assets/departments.json` يحتوي على بيانات الإدارات الفعلية من تجمع جدة الصحي الثاني.

## البيانات المحمّلة من JSON
تم تحميل البيانات التالية من ملف JSON الفعلي:

### الإدارات التنفيذية والأقسام التابعة:

#### 1. الشئون القانونية والإلتزام
- الشئون القانونية
- الإلتزام

#### 2. الشئون الفنية والتنظيمية
- مكتب الرئيس التنفيذي
- تطوير الأعمال
- الزائر السري
- الحج والعمرة

#### 3. الشئون الإدارية
- الإتصالات الإدارية
- الخدمات العامة

#### 4. إدارة الصحة السكانية
- تحليلات إدارة صحة السكان
- تسجيل السكان
- تصنيف المخاطر والتنبؤات الصحية

#### 5. إدارة الصحة العامة
- برامج الصحة العامة
- مكافحة العدوى
- الوقاية من الأمراض المعدية
- السجون
- صحة البيئة والصحة المهنية
- التعزيز والتثقيف الصحي
- نواقل المرض والمراض المشتركة

#### 6. إدارة المنافذ
- مراكز المراقبة الصحية بمطار الملك عبدالعزيز
- مراكز المراقبة الصحية بميناء رابغ

#### 7. الطوارئ والأزمات
- التنسيق الطبي
- الإستيعاب السريري
- النقل الإسعافي
- مركز التحكم بالموارد

#### 8. الخدمات الطبية المساعدة
- التأهيل والرعاية المديدة
- التغذية
- الأشعة
- المختبر وبنك الدم
- السجلات والترميز الطبي
- الرعاية الصيدلانية
- شؤون الوفيات وثلاجات الموتى

#### وغيرها من الإدارات الأخرى...

## آلية عمل النظام

### 1. تحميل البيانات التلقائي
```dart
// تتم قراءة ملف JSON تلقائياً عند فتح الاستمارة
final departmentsData = await DepartmentsService().loadDepartments();
```

### 2. التفاعل المتدرج
- المستخدم يختار **الإدارة التنفيذية** من القائمة المنسدلة الأولى
- بناءً على الاختيار، تتحدث القائمة الثانية بالأقسام المناسبة
- لا يمكن اختيار القسم قبل اختيار الإدارة التنفيذية

### 3. التحقق من صحة البيانات
- يتم التحقق من اختيار كلا الحقلين قبل إرسال الاستمارة
- في حالة فشل تحميل ملف JSON، يتم استخدام بيانات افتراضية

## لتحديث بيانات الإدارات

### 1. تحديث ملف JSON
```json
[
  {
    "هيكلة الإدارة": "نوع الإدارة",
    "إسم الإدارة الرئيسية": "اسم الإدارة التنفيذية",
    "إسم الإدارة الفرعية": "اسم القسم"
  }
]
```

### 2. إعادة تشغيل التطبيق
بعد تحديث ملف JSON، أعد تشغيل التطبيق لتحميل البيانات الجديدة.

### 3. إضافة إدارات جديدة
لإضافة إدارة أو قسم جديد:
1. أضف عنصر JSON جديد في الملف
2. تأكد من الحقول المطلوبة: "إسم الإدارة الرئيسية" و "إسم الإدارة الفرعية"
3. احفظ الملف بترميز UTF-8
4. أعد تشغيل التطبيق

## المزايا الجديدة

1. **البيانات الفعلية**: استخدام بيانات حقيقية من تجمع جدة الصحي الثاني
2. **سهولة التحديث**: تحديث البيانات بتعديل ملف JSON فقط
3. **الأداء المحسن**: تحميل سريع مقارنة بـ Excel
4. **المرونة**: إضافة أو إزالة إدارات بسهولة
5. **الموثوقية**: نظام احتياطي في حالة فشل التحميل

## التحسينات المستقبلية

1. **التحديث الديناميكي**: تحديث البيانات من API خارجي
2. **التخزين المحلي**: حفظ البيانات محلياً للوصول السريع
3. **البحث المتقدم**: إضافة البحث النصي في الإدارات
4. **التزامن**: مزامنة البيانات مع قاعدة بيانات مركزية

## تنسيق ملف JSON

### الحقول المطلوبة:
- `هيكلة الإدارة`: نوع التصنيف (اختياري)
- `إسم الإدارة الرئيسية`: الإدارة التنفيذية (مطلوب)
- `إسم الإدارة الفرعية`: القسم الفرعي (مطلوب)

### مثال:
```json
{
  "هيكلة الإدارة": "الإدارة التنفيذية لتقديم الرعاية الصحية",
  "إسم الإدارة الرئيسية": "الطوارئ والأزمات",
  "إسم الإدارة الفرعية": "التنسيق الطبي"
}
```
